---
title: 用户传图模块
date: 2025-05-06T15:49:47+08:00
draft: false
categories:
  - 项目
series:
  - 云图库开发
series_weight: 3
---

{{< series >}}


## 要实现的功能：
1. 用户传图
2. 根据url传图
3. 批量抓取图片

## 用户传图
### 需求分析

 之前有了管理员传图的功能

 我们只需要改造一下， 并加入审核就可以（出现了用户传数据的操作）

审核机制：
要实现：
1. 管理员传图自动通过审核
2. 用户传图直接为未通过状态
3. 管理员可对审核状态进行修改

方法改造：
1. 原先方法中开放权限给普通用户
2. 在数据库操作前，对图片的参数进行按照用户身份进行填充（管理员自动通过，普通用户为未审核）




### 库表设计

审核状态， 审核时间 审核信息，审核人id

### 后端开发


1. 对审核状态写一个枚举类


2. 写请求对象


3. 写service

4. 改controller

修改权限设置，



### 前端开发

将创建图片的页面开放给普通用户



### 后续开发

审核效率：
1. 使用第三方图片服务
2. ai审核
3. 对vip用户直接通过

审核通过通知

未通过的图片用户可以查看



## 根据url传图

### 需求分析

流程：
1. 验证url
2. 下载图片到后端
3. 将图片存储

复用上传文件的接口

1. 多了一个下载文件的步骤
2. 多了验证url的步骤


### 后端开发




### 前端开发
在上传图片的页面
增加输入框
提交时上传图片

使用tab组件，将两种方式隔开



## 批量抓取

### 需求分析
1. 使用爬虫从搜索引擎进行爬取
2. 解析html中的地址
3. 通过`根据url传图`的方法进行上传


